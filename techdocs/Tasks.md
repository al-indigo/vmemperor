# Задачи Xen (tasks)

Изначально задачи записываются в таблицу задач тогда, когда начинают фигурировать в поле `current_operations` какого-либо объекта Xen.
Права задачи выставляются таким образом, что доступ к ней имеют те пользователи, которые имеют соответствующий доступ к объекту-родоначальнику задачи (все классы прав доступа являются надмножеством классов задач Xen. Например, если пользователь имеет право доступа `start` для  конкретной `VM`, он может отслеживать все задачи класса `start` для этой `VM`)

 См.  `XenObject.process_event` (`xenadapter/xenobject.py`)
 
 

Если задача не была записана исходя из того, что она есть в `current_operations`, она игнорируется классом `Task` при обработке события класса `task`. См. `Task.process_record` (`xenadapter/task.py`)

Однако, когда задача создается нами (через вызов Async XAPI), мы добавляем ее в таблицу задач в момент создания с полем `vmemperor=True` для того, чтобы уничтожить ее когда она завершится.
См. `XenObject.__getattr__` (создание) и `Task.process_event` (уничтожение)
 